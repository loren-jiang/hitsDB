{% extends "base.html" %}

{% load static %}
{% load render_table from django_tables2 %}
{% load crispy_forms_tags %}

{% block content %}

<div id="exp-container" class="container">
    <div class="row">

        <div class="col-3">
        <div id="exp-info" class="jumbotron">
            <h3> {{ experiment.name }}</h3>
            <p> Created: {{ experiment.dateTime }}</p>
            <p> Protein: {{ experiment.protein }}</p>
            <p> Description: {{ experiment.description }}</p>
            <p> Library: 
                {% if experiment.library %}
                <a href="{% url 'lib' experiment.library.id %}">{{ experiment.library }}</a> 
                {% endif %}
            </p> 
            <a class='btn btn-danger' role='button' href={% url 'delete_exp' experiment.pk %}> Delete experiment </a> 
        </div>

        <div id="exp-plates">
            {% render_table src_plates_table %}
            {% render_table dest_plates_table %}
        </div>  
        </div>

        <div class="col-9">
            <div class="row">
                <div class="col-6">
                    <div class="jumbotron">
                        <h3>Step 1: Experiment setup</h3>
                        <form id="exp-form" method="post">{% csrf_token %}
                            {{ forms.expform|crispy}}
                            <input type="submit" value="Save">
                        </form>
                    </div>
                </div>
                <div class="col-6">
                    <div class="jumbotron">
                        <h3>Step 2: Plate setup</h3>
                        {% if experiment.library %}
                        <form id="plates-form" method="post">{% csrf_token %}
                            {{ forms.platesform|crispy}}
                            <input type="submit" value="Generate plates">
                        </form>
                        {% else %}
                        <p> Please select library in Step 1.</p>
                        {% endif %}
                    </div>
                </div> 

                <div class="col-6">
                    <div class="jumbotron">
                        <h3>Step 3: Soak setup</h3>
                        {% if experiment.plates_valid %}
                        <form id="soaks-form" method="post">{% csrf_token %}
                            {{ forms.soaksform|crispy}}
                            <input type="submit" value="Generate soaks">
                        </form> 
                        {% else %}
                        <p> Please complete Step 2.</p>
                        {% endif %}
                    </div>
                </div>
                <div class="col-6">
                    <div class="jumbotron">
                        <h3>Step 4: Plate setup</h3>
                        {% if experiment.soaks %}
                        <p>soaks!</p>
                        {% else %}
                        <p> Please complete Step 1.</p>
                        {% endif %}
                    </div>
                </div> 
            </div>
            
        </div>

    </div>
</div>
  
  

{% endblock content %}