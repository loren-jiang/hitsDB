{% extends 'base.html' %}
{% load static %}
{% load render_table from django_tables2 %}
{% block content %}
<link href="{% static 'css/soaks.css' %}" rel="stylesheet">
<div class='container-fluid'>
  <div class='row justify-content-center'>
    <div class='col-md-5'>
      <!-- {% load django_tables2 %} 
      {% render_table soaks_table %} -->
      
      {% regroup src_soaks_qs by plate_id as soaks_list %}
        {% for p in soaks_list %}
        <br>
          Plate: {{ p.grouper }}
          <div class="soaks-table">
            <table class="table table-condensed table-borderless">
              {% regroup p.list by well_row as by_row %}

              <tr class="row">
                <th class="col"></th>
                {% for i in by_row.0.list %}
                  <th class="col">{{forloop.counter}}</th>
                {% endfor %}
              </tr>

              {% for w in by_row %}
              <tr class="row">
                <th class="col">{{forloop.counter}}</th>
                {% for s in w.list %}
                  <td class="col">{{s.src.name}}</td>
                {% endfor %}
              </tr>
              {% endfor %}
              
            </table>
          </div>
          

           
        {% endfor %}
    </div>
    <div class='col-md-1'>

    </div>
    <div class='col-md-5'>
       
      
      {% regroup dest_soaks_qs  by plate_id as soaks_list %}
        {% for p in soaks_list %}
        <br>
          Plate: {{ p.grouper }}
          <div class="soaks-table">
            <table class="table table-condensed table-borderless">
              {% regroup p.list by well_row as by_row %}

              <tr class="row">
                <th class="col"></th>
                {% for i in by_row.0.list %}
                  <th class="col">{{forloop.counter}}</th>
                {% endfor %}
              </tr>

              {% for w in by_row %}
              <tr class="row">
                <th class="col">{{forloop.counter}}</th>
                
                {% for s in w.list %}
                  <td class="col">{{s.dest.parentWell.name}}</td>
                {% endfor %}

              </tr>
              {% endfor %}
              
            </table>
          </div>
          

            
        {% endfor %}
    </div>
  </div>	
</div>

{% endblock %}
