{% extends 'base.html' %}
{% block content %}
{% load static %}
{% load render_table from django_tables2 %}
<!-- might change this to check for same GROUP -->
{% if pkOwner == pkUser %}
<div id="template-container" class="container">
  <div class="row">

    <div class="col-3">
      <div id="exp-info" class="jumbotron">
        <h4> {{ experiment.name }}</h4>
        <p> Created: {{ experiment.dateTime }}</p>
        <p> Protein: {{ experiment.protein }}</p>
        <p> Description: {{ experiment.description }}</p>
        <a class='btn btn-danger' role='button' href={% url 'delete_exp' experiment.pk %}> Delete experiment </a> 
      </div>

      <div id="exp-plates">
        {% render_table src_plates_table %}
        {% render_table dest_plates_table %}
      </div>  
    </div>

    <div class="col-9">

    </div>

  </div>
</div>
  

  <a class='btn btn-info' role='button' href={% url 'delete_exp_plates' experiment.pk %}> Delete plates </a>

  <a class='btn btn-info' role='button' href={% url 'soaks_csv_view' experiment.pk %}> Download soaks as .csv </a> 
  <br>
  <br>

  <!-- <div class="container-fluid">

    <ul class="nav nav-tabs justify-content-center" id="myTab" role="tablist">
    
      <li class="nav-item">
        <a class="nav-link active" id="profile-tab" data-toggle="tab" href="#soaks" role="tab" aria-controls="soaks" aria-selected="true">Soaks</a>
      </li>
    
      <li class="nav-item">
        <a class="nav-link" id="home-tab" data-toggle="tab" href="#plates" role="tab" aria-controls="plates" aria-selected="false">Plates</a>
      </li>
    
      <li class="nav-item">
        <a class="nav-link" id="crystals-tab" data-toggle="tab" href="#crystals" role="tab" aria-controls="crystals" aria-selected="false">Crystals</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" id="cryo-tab" data-toggle="tab" href="#cryo" role="tab" aria-controls="cryo" aria-selected="false">Plates</a>
      </li>
      
    </ul>
    
    <div class="tab-content" id="myTabContent">
      <div class="tab-pane fade show active" id="soaks" role="tabpanel" aria-labelledby="soaks-tab">
        <div class='row justify-content-center'>
          <div class='col-md-10'> 
              {% render_table soaks_table %}
          </div>
               
        </div>
      </div>
      <div class="tab-pane fade" id="plates" role="tabpanel" aria-labelledby="plates-tab">
        <div class='row justify-content-center'>
          <div class='col-md-10'>
              {% render_table src_plates_table %}
          </div>
                
        </div>
      </div>
    
      <div class="tab-pane fade" id="crystals" role="tabpanel" aria-labelledby="crystals-tab">
        
      </div>
    
      <div class="tab-pane fade" id="cryo" role="tabpanel" aria-labelledby="cryo-tab">
       
      </div>
    
      
    
    </div>
    
  </div> -->
{% else %}
  <div class=container-fluid>
      <div class="col-lg-4 offset-md-4">
          <div class="jumbotron">
          <p> You don't have permission to view this experiment...</p>
        </div>
    </div>
  </div>
{% endif %}
   

<style>
    .flex-container {
    padding: 0;
    margin: 0;
    list-style: none;
    display: -webkit-box;
    display: -moz-box;
    display: -ms-flexbox;
    display: -webkit-flex;
    display: flex;
    -webkit-flex-flow: row;
    justify-content: space-around;
    line-height:30px;
    }
    .flex-item {
    background: tomato;
    margin: 1px;
    color: white;
    font-weight: bold;
    font-size: 1.0em;
    text-align: center;
    flex: 1 0 auto;
    height:auto;
    }
    .flex-item:hover {
    background: orange;
    }
    .flex-item:before {
    content:'';
    float:left;
    padding-top: 100%;
    }


    .forum_hover { background-color: orange !important; }

    .tab-pane {
      overflow-y: auto;
      height: 1000px;
    }
</style>

{% endblock %}
{% block javascript %}

<script>
    $(document).ready(function(){
      $('[data-toggle="tooltip"]').tooltip();   
    });
    
    $(document).ready(function(){
      $("#source_plates .flex-item").hover(function(){
        var id = this.id.split("_")[1];
       $("#dest_" + id).toggleClass('forum_hover');
        var soak_id = $(this).attr("soak-id");
       $("#soak_desc").html(soak_id);
      });

      $("#dest_plates .flex-item").hover(function(){
        var id = this.id.split("_")[1];
       $("#src_" + id).toggleClass('forum_hover');
       
      });
      // console.log({{plates|safe}})
    });
</script>
{% endblock %}